- name: Install docker
  tags:
    - docker
    - ubuntu
    - macos
  become: yes
  become_user: root
  block:
    - name: install with convenience script
      shell: >
        curl -fsSL https://get.docker.com | sh
    - name: Add docker compose alias
      lineinfile:
        path: "{{ ansible_env.HOME }}/.zshrc"
        line: "alias docker-compose='docker compose'"

- name: Install docker arch
  tags:
    - arch
  become: yes
  become_user: root
  block:
    - name: Install docker with pacman
      pacman:
        name: docker
        state: present
    - name: Install docker compose
      pacman:
        name: docker-compose
        state: present
  when: ansible_distribution == "Arch Linux"
